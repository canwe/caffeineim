<?xml version="1.0" encoding="UTF-8"?>
<project name="icqlib" default="build-lib" basedir=".">
    
    <property name="src.dir" value="src"/>
	<property name="test.dir" value="test"/>
	<property name="build.dir" value="dist"/>
    
    <target name="build-lib">
        <mkdir dir="${build.dir}"/>		
        <javac srcdir="${src.dir}" destdir="${build.dir}" deprecation="on"
        	   includes="**/*.java">
            <classpath>
                <pathelement location="."/>
            </classpath>
        </javac>
    </target>
    
    <target name="build-tests" depends="build-lib">
        <javac srcdir="${test.dir}" destdir="${build.dir}" deprecation="on"
               includes="**/*.java">
            <classpath>
                <pathelement location="${test.dir}"/>
				<pathelement location="${build.dir}"/>                    
            </classpath>
        </javac>
    </target>

    <target name="clean">
        <delete dir="${build.dir}"></delete>
    </target>
    
    <target name="build">
        <antcall target="build-lib"></antcall>
        <antcall target="build-tests"></antcall>
    </target>

	<target name="jar" depends="build-lib">
	    <jar destfile="${ant.project.name}.jar"
		     duplicate="preserve"            
		     compress="true">
	    	  <fileset dir="${build.dir}"/>
		</jar>	
	</target>
</project>